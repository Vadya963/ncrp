// координаты центров помещений для радио:
/*    create3DText(-1295.72, 1706.66, 10.5592,        "01-KingstonClothesStoreRadio"           , CL_YELLOW, 2000);
    create3DText(-1149.45, 1588.94, 6.25566,        "02-HillOfTaraRadio"                     , CL_YELLOW, 2000);
    create3DText(-1585.75, 942.841, -5.20643,       "03-GreenfieldGasstationRadio"           , CL_YELLOW, 2000);
    create3DText(-1686.19, -231.996, -20.328,       "04-SandIslantGasstationRadio"           , CL_YELLOW, 2000);
    create3DText(-517.973, 871.842, -19.3224,       "05-UptownDressingShopRadio"             , CL_YELLOW, 2000);
    create3DText(338.483, 881.513, -21.3066,        "06-LittleItalyGasstation(East)Radio"    , CL_YELLOW, 2000);
    create3DText(429.584, 302.659, -20.1786,        "07-Chinatown. Gas station. Radio"       , CL_YELLOW, 2000);
    create3DText(541.734, 2.07937, -18.2491,        "08-OsterbayGasstationRadio"             , CL_YELLOW, 2000);
    create3DText(-41.8942, 389.116, -13.9963,       "09-EastSideClothingShopRadio"           , CL_YELLOW, 2000);
    create3DText(105.723, 180.87, -20.0394,         "010-EastSideGasstaionRadio"             , CL_YELLOW, 2000);
    create3DText(-5.61307, 560.5, -19.4068,         "011-LittleItalyClothingShopRadio"       , CL_YELLOW, 2000);
    create3DText(-149.686, 604.01, -20.1886,        "012-LittleitalyGasstaion2Radio"         , CL_YELLOW, 2000);
    create3DText(240.014, 709.288, -24.0321,        "013-LittleitalyStellasDinerRadio"       , CL_YELLOW, 2000);
    create3DText(631.654, 897.374, -12.0138,        "014-LittleitalyBrialinBarRadio"         , CL_YELLOW, 2000);
    create3DText(-53.6405, 742.169, -21.9009,       "015-LittleitalyFreddysBarRadio"         , CL_YELLOW, 2000);
    create3DText(-8.8025, 741.246, -22.0582,        "016-LittleitalyGunshopNearFBRadio"      , CL_YELLOW, 2000); // near Freddy's Bar
    create3DText(-168.989, 522.981, -16.0193,       "017-LittleitalyGiuseppesShopRadio"      , CL_YELLOW, 2000);
    create3DText(-771.725, -377.324, -20.4072,      "018-SouthPortIlliasBarRadio"            , CL_YELLOW, 2000);
    create3DText(-321.456, -590.863, -20.1043,      "019-SouthPortGunshopRadio"              , CL_YELLOW, 2000);
    create3DText(-377.02, -448.385, -17.2661,       "020-SouthPortDiptonApparelRadio"        , CL_YELLOW, 2000);
    create3DText(-251.738, -70.3595, -11.458,       "021-MidtownUangelsD&RClosingRadio"      , CL_YELLOW, 2000);
    create3DText(24.2735, -78.9135, -15.5926,       "022-MidtownTheMalteseFalconRadio"       , CL_YELLOW, 2000);
    create3DText(-631.257, -41.4123, 0.922398,      "023-WestSideFuelStationRadio"           , CL_YELLOW, 2000);
    create3DText(-639.262, 349.289, 1.34485,        "024-WestSideMonaLisaRadio"              , CL_YELLOW, 2000);
    create3DText(-1558.92, -166.169, -19.6113,      "025-niggabarradio"                      , CL_YELLOW, 2000);
    create3DText(415.377, -290.927, -20.1622,       "026-OysterBayClothesRadio"              , CL_YELLOW, 2000);
    create3DText( -566.002, 312.354, 0.168081,      "027-WestSideGunshopRadio"               , CL_YELLOW, 2000);
    create3DText(-1588.4, 177.376, -12.4393,        "028-SandIslantDinerRadio"               , CL_YELLOW, 2000);
    create3DText( -627.297, 291.996, -0.267101,     "029-WSDIptonApparelRadio"               , CL_YELLOW, 2000);
    create3DText( -561.204, 428.302, 1.02075,       "030-West Side. Stella's Diner. Radio"   , CL_YELLOW, 2000);
    create3DText(-710.199, 1756.32, -15.0063,       "031-DiptonGasstaionRadio"               , CL_YELLOW, 2000);
    create3DText( 275.36, -452.657, -20.1636,       "032-OysterBayGunshopRadio"              , CL_YELLOW, 2000);
    create3DText( 277.922, -120.387, -12.2741,      "033-OysterBayGunshopRadio2"             , CL_YELLOW, 2000);
    create3DText( 344.479, 41.7052, -24.1478,       "034-OysterBayDiptonApparelRadio"        , CL_YELLOW, 2000);
    create3DText( 66.3907, 137.906, -14.4583,       "035-ESgunRadioCenter"                   , CL_YELLOW, 2000);
    create3DText( 271.602, 775.99, -21.2439,        "036-LIDiptoApparelRadioCenter"          , CL_YELLOW, 2000);
    create3DText( 402.929, 605.669, -24.9746,       "037-LIWestgunRadioCenter"               , CL_YELLOW, 2000);
    create3DText( -286.356, 1625.76, -23.0758,      "038-RiverSideGunRadioCenter"            , CL_YELLOW, 2000);
    create3DText( -1306.47, 1612.38, 1.22659,       "039-HarryRadioCenter"                   , CL_YELLOW, 2000);
    create3DText( -1181.47, 1704.52, 11.0941,       "040-KingstonGunRadioCenter"             , CL_YELLOW, 2000);
    create3DText( -1425.68, 1296.22, -13.7195,      "041-KingstonDiptonApparelRadioCEnter"   , CL_YELLOW, 2000);
    create3DText( -1582.61, 1603.15, -5.22507,      "042-KingstonEmpireDinerRadio"           , CL_YELLOW, 2000);
    create3DText( -1419.72, 961.505, -12.7543,      "043-GreenfieldEmpireDinerRadio"         , CL_YELLOW, 2000);
    create3DText( -1384.29, 470.847, -22.1321,      "044-LoneStarRadioCenter"                , CL_YELLOW, 2000);
    create3DText( -1377.66, 386.016, -23.7368,      "045-HunterDiptonApparelRadio"           , CL_YELLOW, 2000);
    create3DText( -1533.55, 3.86801, -17.8468,      "046-SIDiptonApparelRadio"               , CL_YELLOW, 2000);
    create3DText( -1396.45, -30.9751, -17.8468,     "047-SIgunRadioCenter"                   , CL_YELLOW, 2000);
    create3DText( -644.641, 1296.51, 3.94464,       "048-HighbrookCenterRadio"               , CL_YELLOW, 2000);
    create3DText( 142.147, -430.395, -19.429,       "049-OysterDinerRadioCenter"             , CL_YELLOW, 2000);

*/

// координаты радио приёмников:
/*

        create3DText( -1303.63, 1608.74, 1.22659,       "122-HarryRadio",                        CL_YELLOW, 2000);
        create3DText( 68.7955, 141.182, -14.4583,       "117-ESgunRadio",                        CL_YELLOW, 2000);
        create3DText(-645.075, 1293.6, 3.94464,         "1-HighbrookDinerRadio",                 CL_YELLOW, 2000);
        create3DText(-711.473, 1757.95, -14.9935,       "2-DiptonGasStationRadio",            CL_WHITE);
        create3DText(-1393.34, -33.4857, -17.8468,      "48-SandIslandGunRadio",               CL_WHITE);
        create3DText(-1530.26, 2.99262, -17.8468,       "49-SandIslandClothesRadio",           CL_WHITE);
        create3DText(-1424.84, 1299.52, -13.7195,       "51-GreenfieldClothesRadio",           CL_WHITE);
        create3DText(-1585.25, 1605.54, -5.22507,       "53-KingstonDinnerRadio",              CL_WHITE);
        create3DText( -1184.48, 1707.1, 11.0941,        "55-KingstonGunRadio",                 CL_WHITE);
        create3DText(-289.424, 1628.11, -23.0758,       "57-RiversideGunRadio",                CL_WHITE);
        create3DText( 273.315, -455.838, -20.1636,      "61-OysterBayGunRadio",                CL_WHITE);
        create3DText( 140.116, -427.935, -19.429,       "62-OysterBayDinnerRadio",             CL_WHITE);
        create3DText( 280.497, -117.119, -12.2741,      "64-OysterBayGunRadio2",               CL_WHITE);
*/


local radioPoint = [
    [-1295.72, 1706.66, 10.5592,        "01-KingstonClothesStoreRadio"           ],
    [-1149.45, 1588.94, 6.25566,        "02-HillOfTaraRadio"                     ],
    [-1585.75, 942.841, -5.20643,       "03-GreenfieldGasstationRadio"           ],
    [-1686.19, -231.996, -20.328,       "04-SandIslantGasstationRadio"           ],
    [-517.973, 871.842, -19.3224,       "05-UptownDressingShopRadio"             ],
    [338.483, 881.513, -21.3066,        "06-LittleItalyGasstation(East)Radio"    ],
    [429.584, 302.659, -20.1786,        "07-Chinatown. Gas station. Radio"       ],
    [541.734, 2.07937, -18.2491,        "08-OsterbayGasstationRadio"             ],
    [-41.8942, 389.116, -13.9963,       "09-EastSideClothingShopRadio"           ],
    [105.723, 180.87, -20.0394,         "010-EastSideGasstaionRadio"             ],
    [-5.61307, 560.5, -19.4068,         "011-LittleItalyClothingShopRadio"       ],
    [-149.686, 604.01, -20.1886,        "012-LittleitalyGasstaion2Radio"         ],
    [240.014, 709.288, -24.0321,        "013-LittleitalyStellasDinerRadio"       ],
    [631.654, 897.374, -12.0138,        "014-LittleitalyBrialinBarRadio"         ],
    [-53.6405, 742.169, -21.9009,       "015-LittleitalyFreddysBarRadio"         ],
    [-8.8025, 741.246, -22.0582,        "016-LittleitalyGunshopNearFBRadio"      ], // near Freddy's Bar
    [-168.989, 522.981, -16.0193,       "017-LittleitalyGiuseppesShopRadio"      ],
    [-771.725, -377.324, -20.4072,      "018-SouthPortIlliasBarRadio"            ],
    [-321.456, -590.863, -20.1043,      "019-SouthPortGunshopRadio"              ],
    [-377.02, -448.385, -17.2661,       "020-SouthPortDiptonApparelRadio"        ],
    [-251.738, -70.3595, -11.458,       "021-MidtownUangelsD&RClosingRadio"      ],
    [24.2735, -78.9135, -15.5926,       "022-MidtownTheMalteseFalconRadio"       ],
    [-631.257, -41.4123, 0.922398,      "023-WestSideFuelStationRadio"           ],
    [-639.262, 349.289, 1.34485,        "024-WestSideMonaLisaRadio"              ],
    [-1558.92, -166.169, -19.6113,      "025-niggabarradio"                      ],
    [415.377, -290.927, -20.1622,       "026-OysterBayClothesRadio"              ],
    [ -566.002, 312.354, 0.168081,      "027-WestSideGunshopRadio"               ],
    [-1588.4, 177.376, -12.4393,        "028-SandIslantDinerRadio"               ],
    [ -627.297, 291.996, -0.267101,     "029-WSDIptonApparelRadio"               ],
    [ -561.204, 428.302, 1.02075,       "030-West Side. Stella's Diner. Radio"   ],
    [-710.199, 1756.32, -15.0063,       "031-DiptonGasstaionRadio"               ],
    [ 275.36, -452.657, -20.1636,       "032-OysterBayGunshopRadio"              ],
    [ 277.922, -120.387, -12.2741,      "033-OysterBayGunshopRadio2"             ],
    [ 344.479, 41.7052, -24.1478,       "034-OysterBayDiptonApparelRadio"        ],
    [ 66.3907, 137.906, -14.4583,       "035-ESgunRadioCenter"                   ],
    [ 271.602, 775.99, -21.2439,        "036-LIDiptoApparelRadioCenter"          ],
    [ 402.929, 605.669, -24.9746,       "037-LIWestgunRadioCenter"               ],
    [ -286.356, 1625.76, -23.0758,      "038-RiverSideGunRadioCenter"            ],
    [ -1306.47, 1612.38, 1.22659,       "039-HarryRadioCenter"                   ],
    [ -1181.47, 1704.52, 11.0941,       "040-KingstonGunRadioCenter"             ],
    [ -1425.68, 1296.22, -13.7195,      "041-KingstonDiptonApparelRadioCEnter"   ],
    [ -1582.61, 1603.15, -5.22507,      "042-KingstonEmpireDinerRadio"           ],
    [ -1419.72, 961.505, -12.7543,      "043-GreenfieldEmpireDinerRadio"         ],
    [ -1384.29, 470.847, -22.1321,      "044-LoneStarRadioCenter"                ],
    [ -1377.66, 386.016, -23.7368,      "045-HunterDiptonApparelRadio"           ],
    [ -1533.55, 3.86801, -17.8468,      "046-SIDiptonApparelRadio"               ],
    [ -1396.45, -30.9751, -17.8468,     "047-SIgunRadioCenter"                   ],
    [ -644.641, 1296.51, 3.94464,       "048-HighbrookCenterRadio"               ],
    [ 142.147, -430.395, -19.429,       "049-OysterDinerRadioCenter"             ]
];

local RADIO_COLOR = CL_JADE;
local RADIO_RADIUS = 12.0; // need float
local radioToggles = {};
local radioMsgsCache = [];
local radioMsgs = [
    "radio.noise"          ,
    "radio.pdd"            ,
    "radio.parking"        ,
    "radio.carrental"      ,
    "radio.carsearching"   ,
    "radio.vangel"         ,
    "radio.empirecustom"   ,
    "radio.swiftcola"      ,
    "radio.badguy"         ,
    "radio.bigbreak"       ,
    "radio.potomac"        ,
    "radio.empirediner"    ,
    "radio.phoneservices"  ,
    "radio.masterbeer"     ,
    "radio.empiretimes"    ,
    "radio.cab"            ,
    "radio.emeryshirt"     ,
    "radio.diptonapparel"  ,
    "radio.barbers"        ,
    "radio.tragooil1"      ,
    "radio.tragooil2"      ,
    "radio.ascot"          ,
    "radio.milk"           ,
    "radio.dobinson"       ,
    "radio.transport"      ,
    "radio.ricky"          ,
    "radio.oldempirical"   ,
    "radio.theball"
];

translation("en", {
    "radio.enabled"         :   "[RADIO] Tips has been enabled."
    "radio.disabled"        :   "[RADIO] Tips has been disabled."
    "radio.prefix"          :   "[RADIO]"
    "radio.noise"           :   "Pschschsch-chchshschschsch-pffffzzzziiiiuuuuschschschsch"

    "radio.pdd"             :   "Police department Empire Bay reminds: observe rules of the road! Take care of yourself, the health and the lives of their loved ones and those around you!"
    "radio.parking"         :   "Drivers, be decent! Do not leave your car in the wrong place."
    "radio.carrental"       :   "Need car? But you haven't enough money to buy a car? Rent it at the Car Rental in North Millville!"
    "radio.carsearching"    :   "You can find all your cars by Empire Bay Car Searching Services. Phone number: 555-0000. Cost: $49.90"
    "radio.vangel"          :   "You can buy clothes in Vangel's clothing store in Midtown"
    "radio.empirecustom"    :   "Empire Custom - first advertising agency in Empire Bay. We can help you to advertise! Call us: 555-1111"

    "radio.swiftcola"       :   "Let your taste drift with Cola Swift. She can't resist a Swift."
    "radio.badguy"          :   "Bad Guy car showroom - cars for connoisseurs of luxury!"
    "radio.bigbreak"        :   "Big Break sigarettes. Take a Break from it all!"
    "radio.potomac"         :   "Potomac Indian - the choice of professionals."
    "radio.empirediner"     :   "Empire Diner - open all night!"
    "radio.phoneservices"   :   "Empire Telephone Services - stay in touch!"
    "radio.masterbeer"      :   "Master Beer - master make all the difference!"
    "radio.empiretimes"     :   "Empire Times - The News you need to hear."
    "radio.cab"             :   "Empire Bay Cab - convenience in the first place."
    "radio.emeryshirt"      :   "Emery shirt - cheap and cheerful."
    "radio.diptonapparel"   :   "Dipton Apparel - clothing you can depend on!"
    "radio.barbers"         :   "Keep looking beautiful with Barbers."
    "radio.tragooil1"       :   "Trago Oil - always on the top!"
    "radio.tragooil2"       :   "Trago Oil - fuel for Leaders."
    "radio.ascot"           :   "Ascot Bailey S200 - enjoy the freedom!"
    "radio.milk"            :   "Empire Bay Milk - only fresh goods."
    "radio.dobinson"        :   "Easy to FIND, hard to LEAVE. Dobinson"
    "radio.transport"       :   "Our routes cover the whole city - Empire Bay Transport Lines."
    "radio.ricky"           :   "All the old favorites Ricky's records for dances and private parties."
    "radio.oldempirical"    :   "Old Empirical - the Bay`s best beer!"
    "radio.theball"         :   "The Ball is only in the bowling bar you can spend time."
});

translation("ru", {
    "radio.enabled"         :   "[РАДИО] Радио включено."
    "radio.disabled"        :   "[РАДИО] Радио выключено."
    "radio.prefix"          :   "[РАДИО]"
    "radio.noise"           :   "Пщщщ-ччшщщщщщ-пффффззззииииуууущщщщщщ"

    "radio.pdd"             :   "Полицейский департамент Эмпайр-Бэй напоминает: соблюдайте правила дорожного движения! Берегите себя, здоровье и жизнь своих близких и окружающих Вас людей!"
    "radio.parking"         :   "Водители, будьте порядочны! Не оставляйте свой автомобиль в неположенном месте."
    "radio.carrental"       :   "Нужен автомобиль? Но нет денег на покупку? Возьми в аренду в Car Rental в Северном Милвилле!"
    "radio.carsearching"    :   "Забыли, где оставили свой автомобиль? Мы найдём его! Скорее звони: 555-0000. Стоимость: $49.90"
    "radio.vangel"          :   "Пора обновить гардерод? Ателье Вэнджела в Мидтауне ждёт Вас!"
    "radio.empirecustom"    :   "Empire Custom - первое рекламное агентство в Эмпайр-Бэй. Мы поможем Вам разместить объявление! Звоните: 555-1111"

    "radio.swiftcola"       :   "Спонсор сегодняшнего матча Swift Cola. Покупайте Swift Cola!"
    "radio.badguy"          :   "Автосалон Bad Guy - автомобили для истинных ценителей роскоши!"
    "radio.bigbreak"        :   "Сигареты Big Break! Отвлекитесь от всего!"
    "radio.potomac"         :   "Potomac Indian - выбор профессионалов."
    "radio.empirediner"     :   "Закусочная Empire Diner - открыты всю ночь!"
    "radio.phoneservices"   :   "Телефонная компания Эмпайр-Бэй - оставайтесь на связи!"
    "radio.masterbeer"      :   "Пиво Master - разница в мастерстве!"
    "radio.empiretimes"     :   "Empire Times - новости, которые вам нужно знать."
    "radio.cab"             :   "Таксопарк Эмпайр-Бэй - удобство на первом месте."
    "radio.emeryshirt"      :   "Emery Shirt - дёшево и сердито."
    "radio.diptonapparel"   :   "Dipton Apparel - одежда, на которую можно положиться!"
    "radio.barbers"         :   "Будь красивой вместе с Barbers."
    "radio.tragooil1"       :   "Trago Oil - всегда на высоте!"
    "radio.tragooil2"       :   "Trago Oil - топливо для Лидеров!"
    "radio.ascot"           :   "Ascot Bailey S200 - наслаждайся свободой!"
    "radio.milk"            :   "Молочная компания Эмпайр-Бэй - только свежая фермерская продукция."
    "radio.dobinson"        :   "Легко найти, тяжело потерять. Dobinson"
    "radio.transport"       :   "Наши маршруты охватывают весь город - транспортная компания Эмпайр-Бэй."
    "radio.ricky"           :   "Все хиты Ricky для танцев и частных вечеринок."
    "radio.oldempirical"    :   "Old Empirical - лучшее пиво штата!"
    "radio.theball"         :   "Весело провести время можно только в боулинг-баре The Ball"
});

/*
"Пингвины - это ласточки, которые ели после 18:00"
"Движение - это жизнь, поэтому, лёжа на диванчике, слегка подёргивай ножкой"
"Дорогой, можно я себе туфельки купила?"
"За Вами будущее. Отойдите"
"Be protected with McClusky & Sons" : "Будь защищенным с МакКласки и Сыновья" (оружейный)
 */

event("onRadioMessageSend", function(message) {
    sendMsgToRadio(message);
});

event("onServerHourChange", function() {

    if ((getHour() % 4) != 0) {
        return;
    }

    if (!radioMsgsCache || !radioMsgsCache.len()) {
        radioMsgsCache = clone radioMsgs;
    }

    // remove random value from cache
    local radioMsgid = random(0, radioMsgsCache.len() - 1);
    local message   = radioMsgsCache[radioMsgid];
    radioMsgsCache.remove(radioMsgid);

    sendMsgToRadio(message);

});

function sendMsgToRadio(message) {

    foreach (playerid, value in players) {
        if (getPlayerName(playerid) in radioToggles) continue;

        local radioMsg = plocalize(playerid, "radio.prefix")+" "+plocalize(playerid, message);

        if(isPlayerInVehicle(playerid) ) {
            msg(playerid, radioMsg, RADIO_COLOR);
        } else {
            foreach (pointid, point in radioPoint) {
                if(isPlayerInValidPoint3D(playerid, point[0], point[1], point[2], RADIO_RADIUS)) {
                    msg(playerid, radioMsg, RADIO_COLOR);
                }
            }
        }
    }
}


cmd("togradio", function(playerid) {
    if (!(getPlayerName(playerid) in radioToggles)) {
        msg(playerid, "radio.disabled");
        return radioToggles[getPlayerName(playerid)] <- true;
    }

    msg(playerid, "radio.enabled");
    delete radioToggles[getPlayerName(playerid)];
});


acmd("radio", function(playerid, ...) {
    sendMsgToRadio(concat(vargv));
});
