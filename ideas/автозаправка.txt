Бизнес  Автозаправка

Можно купить любую свободную автозаправку.

Подъезжаешь, видишь 3д текст о продаже. Нажимаешь кнопку E, получаешь информацию. Если согласен - пишешь команду /buy biz
Деньги от покупки начисляются в мэрию города. Предположительная цена - 12к
У заправки есть свой счёт
У заправки есть объём топлива в резервуарах.
У заправки есть налоговый счёт. Сюда переводятся деньги от продажи топлива. Формула галлон * цена за галлон * доля налога. 10 галлонов * $0.2 * 0.10 (10% налог) = 0.2 уходит в tax
У заправки есть поле "Цена покупки".

Автозаправку можно в любой момент продать государству           цена покупки * 0,8 + сумма денег на счёте.

12000 * 0,8 = 9600 + -8000 = 1600

Деньги со счёта "tax" снимает инкассатор. Нужен предмет в виде кассовых денег. Возможно купюры на фоне кассового аппарата. Затем эти деньги отвозит в банк.


По-умолчанию заправка пустая.
В неё нужно привозить бензин.

Владелец может заполнить контракт (предмет инвентаря) на заказ топлива.
В контракте автоматически прописывается место + это подтверждение, что именно владелец создал контракт.
Владелец указывает
- объём
- цену за галлон, по которой он готов купить указанный объём.

На балансе автозаправки должно быть достаточно денег            цена за галлон * объём <= баланс
Да, никто не мешает снять деньги после создания контракта, но зачем?

Заправка не может уйти в минус. Разгружается столько топлива, сколько При отрицательном балансе новые контракты создать нельзя.
Объём указанный в контракте должен быть меньше, чем есть сейчас в хранилище.

Создав контракт, владелец едет в Траго Оил для размещения контракта. Предмет инвентаря удаляется. Контракт записывается в таблицу контрактов.


Игроки приезжают к Траго Оил, смотрят доску контрактов.
- Адрес (алиас заправки), объём, цена за галлон.

Выбрав контракт, игрок принимает его. Ему в инвентарь кладётся контракт, в котором он может посмотреть что, куда в какой срок. Из БД контракт не удаляется.
На выполнение контракта даются реальные сутки.

В листе контракта при успешной разгрузке проставляется метка о выполнении. С этим листком водитель едет обратно к Траго Оил и сдаёт выполненный контракт.


Если водитель в указанное время не выполняет контракт - он платит неустойку 20% от суммы контракта.



Контракт
tbl_contracts
id entity    ownerid contractorid   created  expired  status  data
1  Contract     2         5         1545454  1545464   todo   { place       "Filling Staion EastSide", coords {x, y , z }, count 5, price 0.2 }

status  todo / inprogress / finished / failed

Объём бензовоза     4227 галлонов.


Выполняющий контракт арендует бензовоз (через систему аренды).
Водитель бензовоза может вернуть топливо обратно.
